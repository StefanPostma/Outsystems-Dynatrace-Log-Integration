{
    "version": 11,
    "variables": [
        {
            "key": "Application",
            "type": "query",
            "input": "fetch logs\n| filter process_label <> \"\"\n| filterOut application_name == \"\"\n| sort application_name asc\n| summarize collectDistinct(application_name)",
            "multiple": true
        },
        {
            "key": "Environment",
            "type": "query",
            "input": "fetch logs //, scanLimitGBytes: 500, samplingRatio: 1000\n| fieldsAdd strTenant=toString(environment_name)\n| sort strTenant asc\n| summarize collectDistinct(environment_name)",
            "multiple": true
        },
        {
            "key": "Status",
            "type": "query",
            "input": "fetch logs \n| filter process_label <> \"\"//, scanLimitGBytes: 500, samplingRatio: 1000\n| fieldsAdd strStatus=toString(process_status)\n| sort strTenant asc\n| summarize collectDistinct(process_status)",
            "multiple": true
        },
        {
            "key": "ProcessName",
            "type": "query",
            "input": "fetch logs \n| filter process_label <> \"\"//, scanLimitGBytes: 500, samplingRatio: 1000\n| fieldsAdd strName=toString(process_name)\n| sort strName asc\n| summarize collectDistinct(process_name)",
            "multiple": true
        }
    ],
    "tiles": {
        "0": {
            "type": "markdown",
            "title": "",
            "content": "### Processen dashboard\n> Shows latest process status"
        },
        "1": {
            "type": "data",
            "title": "",
            "query": "fetch logs //, scanLimitGBytes: 500, samplingRatio: 1000\n| filter process_label <> \"\"\n| filter in(application_name, $Application)\n| filter in(environment_name, $Environment)\n| filter in(process_status, $Status)\n| filter in(process_name, $ProcessName)\n|  fields\n       Processname = process_name,\n        ProcessID = process_id,\n        application = application_name,\n\t\tespace = espace_name, \n\t\tstatus = process_status,\n        environment = environment_name,\n        created = process_created,\n        lastModified = process_last_modified\n| sort lastModified desc\n | summarize \n            Processname=collectDistinct(Processname),\n            application=collectDistinct(application),\n            espace=collectDistinct(espace),\n            status=if(takeFirst(status) == \"Closed\", \"ðŸŸ¢ CLOSED\", else: \"ðŸ”´ OPEN\"),\n            environment=collectDistinct(environment),\n            created=takeLast(created),\n            lastModified=takeLast(lastModified),\n            by:ProcessID\n\n| limit 10000",
            "visualization": "table",
            "visualizationSettings": {
                "thresholds": [],
                "chartSettings": {
                    "gapPolicy": "connect",
                    "circleChartSettings": {
                        "groupingThresholdType": "absolute"
                    }
                },
                "singleValue": {
                    "showLabel": true,
                    "label": "",
                    "prefixIcon": "",
                    "autoscale": true,
                    "alignment": "center"
                },
                "table": {
                    "rowDensity": "condensed",
                    "enableLineWrap": true,
                    "enableSparklines": false,
                    "hiddenColumns": [],
                    "lineWrapIds": [],
                    "columnWidths": {}
                }
            }
        },
        "2": {
            "type": "markdown",
            "title": "",
            "content": "### Process dashboard\n> the process dashboards shows the latest status of the processes. "
        }
    },
    "layouts": {
        "0": {
            "x": 0,
            "y": 0,
            "w": 11,
            "h": 3
        },
        "1": {
            "x": 0,
            "y": 3,
            "w": 24,
            "h": 7
        },
        "2": {
            "x": 13,
            "y": 0,
            "w": 11,
            "h": 3
        }
    }
}